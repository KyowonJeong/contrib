name: Download Artifact

on:
  workflow_dispatch:

jobs:
  download-artifact:
    runs-on: windows-latest
    steps:
      - name: Download Artifact
        run: |
          $owner = "KyowonJeong"
          $repo = "contrib"
          $artifactName = "contrib_build-Window.tar.gz" 
          $destinationPath = "test"
          
          # Set up the GitHub token
          $token = $env:GITHUB_TOKEN
          
          # Fetch the latest release information
          $url = "https://api.github.com/repos/$owner/$repo/releases/latest"
          $response = Invoke-RestMethod -Uri $url -Headers @{Authorization = "Bearer $token"} -Method Get
          
          # Extract the download URL for the artifact
          $artifactUrl = ($response.assets | Where-Object {$_.name -eq $artifactName}).browser_download_url
          
          # Download the artifact
          Invoke-WebRequest -Uri $artifactUrl -Headers @{Authorization = "Bearer $token"} -OutFile "$destinationPath\$artifactName"
